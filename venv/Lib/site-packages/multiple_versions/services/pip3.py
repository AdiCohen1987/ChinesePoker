"""
Provide implementation of pip3.
"""
import subprocess

from multiple_versions.services.site_packages import SitePackages
from multiple_versions.services.package import Package


class Pip3:

    def __init__(self, site_packages: SitePackages, extra_index_url: str = None) -> None:
        """
        Construct the package.

        Arguments:
            site_packages (SitePackages): site packages.
            extra_index_url (int): URL to extra Python Package Index. May be private one.
        """
        self.site_packages = site_packages
        self.extra_index_url = extra_index_url

    def install(self, package: Package) -> None:
        """
        Install a package.

        Arguments:
            package (Package): package.

        Returns:
            None.
        """
        if self.extra_index_url is None:
            subprocess.call([
                'pip3',
                'install',
                package.name_for_pip3,
                '--target',
                f'{self.site_packages.path}/{package.name_for_folder}',
            ])
            return None

        subprocess.call([
            'pip3',
            'install',
            package.name_for_pip3,
            '--target',
            f'{self.site_packages.path}/{package.name_for_folder}',
            '--extra-index-url',
            self.extra_index_url,
        ])
        return None
